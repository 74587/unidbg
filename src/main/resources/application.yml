server:
  port: ${SERVER_PORT:9999}
  address: ${SERVER_ADDRESS:0.0.0.0}

spring:
  main:
    banner-mode: "off"
  application:
    name: unidbg-boot-server
  mvc:
    async:
      request-timeout: 300000  # 增加到5分钟，避免registerkey刷新时超时
  task:
    execution:
      pool:
        allow-core-thread-timeout: true
        core-size: 8
        keep-alive: 60s
        max-size: 8

logging:
  pattern:
    console: "%d{HH:mm:ss} %-5level %logger{36} - %msg%n"
  level:
    root: INFO
    org.springframework.boot.StartupInfoLogger: OFF
    org.springframework.boot.web.embedded.tomcat: WARN
    org.springframework.boot.web.servlet.context: WARN
    org.springframework.web.servlet.DispatcherServlet: WARN

application:
  unidbg:
    dynarmic: false
    verbose: false
    async: false

fq:
  cache:
    postgres:
      # 配置 DB_URL（postgresql://user:pass@host:port/db）后自动启用 PostgreSQL 主缓存
      url: ${DB_URL:}
      maximum-pool-size: ${DATABASE_MAXIMUM_POOL_SIZE:8}
      minimum-idle: ${DATABASE_MINIMUM_IDLE:2}
      connection-timeout-ms: ${DATABASE_CONNECTION_TIMEOUT_MS:5000}
  download:
    request-interval-ms: 1000
    max-retries: 3
    retry-delay-ms: 2000
    retry-max-delay-ms: 10000
    upstream-connect-timeout-ms: 15000
    upstream-read-timeout-ms: 30000
    chapter-cache-max-entries: 2000
    chapter-cache-ttl-ms: 1800000
    chapter-include-raw-content: false
    search-cache-max-entries: 256
    search-cache-ttl-ms: 45000
    api-directory-cache-max-entries: 512
    api-directory-cache-ttl-ms: 600000
    auto-restart-enabled: true
    auto-restart-error-threshold: 5
    auto-restart-window-ms: 300000
    auto-restart-min-interval-ms: 120000
    auto-restart-force-halt-after-ms: 10000
    auto-restart-self-heal-enabled: true
    auto-restart-self-heal-cooldown-ms: 120000
  api:
    base-url: "https://api5-normal-sinfonlineb.fqnovel.com"
    user-agent: "com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; Sirius; Build/V417IR;tt-ok/3.12.13.4-tiktok)"
    device:
      aid: '1967'
      cdid: 9daf93bf-4dcf-417e-8795-20284ad26a1f
      device-brand: Xiaomi
      device-id: '1778337441136410'
      device-type: Sirius
      dpi: '440'
      host-abi: arm64-v8a
      install-id: '573270579220059'
      resolution: "2244*1080"
      rom-version: "V417IR+release-keys"
      update-version-code: '68132'
      version-code: '68132'
      version-name: "6.8.1.32"
      os-version: '13'
      os-api: '33'

    device-pool-size: 2
    device-pool-shuffle-on-startup: true
    device-pool-probe-on-startup: true
    device-pool-probe-max-attempts: 3
    device-rotate-cooldown-ms: 60000
    device-pool:
      - name: dev01
        user-agent: "com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; WLZ-AN00; Build/V433IR;tt-ok/3.12.13.4-tiktok)"
        device:
          aid: '1967'
          cdid: 5566b484-82f9-4cef-880d-60ca354e6a99
          device-brand: HUAWEI
          device-id: '670078578733609'
          device-type: WLZ-AN00
          dpi: '480'
          host-abi: arm64-v8a
          install-id: '670078579016233'
          resolution: "1920*1080"
          rom-version: "V433IR+release-keys"
          update-version-code: '68132'
          version-code: '68132'
          version-name: "6.8.1.32"
          os-version: '13'
          os-api: '32'
      - name: dev02
        user-agent: "com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; Sirius; Build/V417IR;tt-ok/3.12.13.4-tiktok)"
        device:
          aid: '1967'
          cdid: 9daf93bf-4dcf-417e-8795-20284ad26a1f
          device-brand: Xiaomi
          device-id: '1778337441136410'
          device-type: Sirius
          dpi: '440'
          host-abi: arm64-v8a
          install-id: '573270579220059'
          resolution: "2244*1080"
          rom-version: "V417IR+release-keys"
          update-version-code: '68132'
          version-code: '68132'
          version-name: "6.8.1.32"
          os-version: '13'
          os-api: '33'
