server:
  port: ${SERVER_PORT:9999}
  address: ${SERVER_ADDRESS:0.0.0.0}

spring:
  main:
    banner-mode: "off"
  application:
    name: unidbg-boot-server
  mvc:
    async:
      request-timeout: 120000
  task:
    execution:
      pool:
        allow-core-thread-timeout: true
        core-size: 8
        keep-alive: 60s
        max-size: 8

logging:
  pattern:
    console: "%d{HH:mm:ss} %-5level %logger{36} - %msg%n"
  level:
    root: INFO
    org.springframework.boot.StartupInfoLogger: OFF
    org.springframework.boot.web.embedded.tomcat: WARN
    org.springframework.boot.web.servlet.context: WARN
    org.springframework.web.servlet.DispatcherServlet: WARN

application:
  unidbg:
    dynarmic: false
    verbose: false
    async: false
    # 默认使用内置 APK（classpath）：com/dragon/read/oversea/gp/apk/base.apk
    # 需要替换 APK：把新 APK 放到 src/main/resources/com/dragon/read/oversea/gp/apk/base.apk 即可
    #
    # 或者覆盖为本地文件路径（优先级更高）：
    # apk-path: /abs/path/to/base.apk
    #
    # 或者显式指定 classpath 资源路径：
    # apk-classpath: com/dragon/read/oversea/gp/apk/base.apk

fq:
  download:
    request-interval-ms: 500
    max-retries: 3
    retry-delay-ms: 1500
    retry-max-delay-ms: 10000
    # 连续异常达到阈值后，进程会自动退出（依赖 Docker/systemd 拉起）
    auto-restart-enabled: true
    auto-restart-error-threshold: 3
    auto-restart-window-ms: 300000
    auto-restart-min-interval-ms: 60000
    auto-restart-force-halt-after-ms: 10000
  api:
    base-url: https://api5-normal-sinfonlineb.fqnovel.com

    # 默认设备配置（无 device-pool 时使用）
    user-agent: com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; WLZ-AN00;
      Build/V433IR;tt-ok/3.12.13.4-tiktok)
    cookie: store-region=cn-zj; store-region-src=did; install_id=670078579016233;
    device:
      aid: '1967'
      cdid: 5566b484-82f9-4cef-880d-60ca354e6a99
      device-brand: HUAWEI
      device-id: '670078578733609'
      device-type: WLZ-AN00
      dpi: '480'
      host-abi: arm64-v8a
      install-id: '670078579016233'
      resolution: 1920*1080
      rom-version: V433IR+release-keys
      update-version-code: '68132'
      version-code: '68132'
      version-name: 6.8.1.32
      os-version: '13'
      os-api: '32'

    # 设备池（风控时切换）：启动时会随机选一个作为当前设备；只使用前 3 个；切换冷却 30s
    device-pool-size: 3
    device-pool-shuffle-on-startup: true
    device-rotate-cooldown-ms: 30000
    device-pool:
      - name: dev001
        user-agent: com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; WLZ-AN00;
          Build/V433IR;tt-ok/3.12.13.4-tiktok)
        cookie: store-region=cn-zj; store-region-src=did; install_id=670078579016233;
        device:
          aid: '1967'
          cdid: 5566b484-82f9-4cef-880d-60ca354e6a99
          device-brand: HUAWEI
          device-id: '670078578733609'
          device-type: WLZ-AN00
          dpi: '480'
          host-abi: arm64-v8a
          install-id: '670078579016233'
          resolution: 1920*1080
          rom-version: V433IR+release-keys
          update-version-code: '68132'
          version-code: '68132'
          version-name: 6.8.1.32
          os-version: '13'
          os-api: '32'
      - name: dev002
        user-agent: com.dragon.read.oversea.gp/68132 (Linux; U; Android 11; zh_CN; iQOO9;
          Build/V394IR;tt-ok/3.12.13.4-tiktok)
        cookie: store-region=cn-zj; store-region-src=did; install_id=4731035182011427;
        device:
          aid: '1967'
          cdid: 82deac44-bfa2-4044-b344-db001494846e
          device-brand: vivo
          device-id: '7840786651573375'
          device-type: iQOO9
          dpi: '560'
          host-abi: armeabi-v7a
          install-id: '4731035182011427'
          resolution: 2560*1440
          rom-version: V394IR+release-keys
          update-version-code: '68132'
          version-code: '68132'
          version-name: 6.8.1.32
          os-version: '11'
          os-api: '30'
      - name: dev003
        user-agent: com.dragon.read.oversea.gp/68132 (Linux; U; Android 13; zh_CN; 23078RKD5C;
          Build/V433IR;tt-ok/3.12.13.4-tiktok)
        cookie: store-region=cn-zj; store-region-src=did; install_id=9722471058643757;
        device:
          aid: '1967'
          cdid: 5a07dfb5-f35b-40c6-95fa-180faa2338c0
          device-brand: Xiaomi
          device-id: '4387993150800872'
          device-type: 23078RKD5C
          dpi: '480'
          host-abi: armeabi-v7a
          install-id: '9722471058643757'
          resolution: 2400*1080
          rom-version: V433IR+release-keys
          update-version-code: '68132'
          version-code: '68132'
          version-name: 6.8.1.32
          os-version: '13'
          os-api: '33'
